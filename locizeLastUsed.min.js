!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).locizeLastUsed=e()}}(function(){return function i(u,s,c){function f(t,e){if(!s[t]){if(!u[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(a)return a(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var r=s[t]={exports:{}};u[t][0].call(r.exports,function(e){return f(u[t][1][e]||e)},r,r.exports,i,u,s,c)}return s[t].exports}for(var a="function"==typeof require&&require,e=0;e<c.length;e++)f(c[e]);return f}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,u=e("./utils.js"),s=(o=e("./request.js"))&&o.__esModule?o:{default:o};function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){i(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(){return{lastUsedPath:"https://api.locize.app/used/{{projectId}}/{{version}}/{{lng}}/{{ns}}",referenceLng:"en",crossDomain:!0,setContentTypeJSON:!1,version:"latest",debounceSubmit:9e4,allowedHosts:["localhost"]}}var a={init:function(e){var t=e.t&&"function"==typeof e.t;this.options=c({},f(),{},this.options,{},t?e.options.locizeLastUsed:e);var n="undefined"!=typeof window&&window.location&&window.location.hostname;this.isAllowed=!n||-1<this.options.allowedHosts.indexOf(n),this.submitting=null,this.pending={},this.done={},this.submit=(0,u.debounce)(this.submit,this.options.debounceSubmit),t&&this.interceptI18next(e)},interceptI18next:function(r){var i=this,u=r.services.resourceStore.getResource;r.services.resourceStore.getResource=function(e,t,n,o){return n&&i.used(t,n),u.call(r.services.resourceStore,e,t,n,o)}},used:function(t,n,e){var o=this;["pending","done"].forEach(function(e){o.done[t]&&o.done[t][n]||(o[e][t]||(o[e][t]={}),o[e][t][n]=!0)}),this.submit(e)},submit:function(t){var o=this;if(!this.isAllowed)return t&&t(new Error("not allowed"));if(this.submitting)return this.submit(t);var e=(0,u.isMissingOption)(this.options,["projectId","version","apiKey","referenceLng"]);if(e)return t&&t(new Error(e));this.submitting=this.pending,this.pending={};function r(e){--i||(o.submitting=null,t&&t(e))}var n=Object.keys(this.submitting),i=n.length;n.forEach(function(e){var t=Object.keys(o.submitting[e]),n=(0,u.replaceIn)(o.options.lastUsedPath,["projectId","version","lng","ns"],c({},o.options,{lng:o.options.referenceLng,ns:e}));t.length?(0,s.default)(c({},{authorize:!0},{},o.options),n,t,r):r()})},type:"3rdParty"},d=a;n.default=d,t.exports=n.default},{"./request.js":2,"./utils.js":3}],2:[function(d,n,o){(function(e){"use strict";function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}var i,c,f;Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,"function"==typeof fetch&&(void 0!==e&&e.fetch?i=e.fetch:"undefined"!=typeof window&&window.fetch&&(i=window.fetch)),"function"==typeof XMLHttpRequest&&(void 0!==e&&e.XMLHttpRequest?c=e.XMLHttpRequest:"undefined"!=typeof window&&window.XMLHttpRequest&&(c=window.XMLHttpRequest)),"function"==typeof ActiveXObject&&(void 0!==e&&e.ActiveXObject?f=e.ActiveXObject:"undefined"!=typeof window&&window.ActiveXObject&&(f=window.ActiveXObject));function a(e,t,n,o){i(t,{method:n?"POST":"GET",body:n?JSON.stringify(n):void 0,headers:{Authorization:e.authorize&&e.apiKey?e.apiKey:void 0,"Content-Type":"application/json"}}).then(function(t){var n=t.headers&&"Error from cloudfront"===t.headers.get("x-cache");if(!t.ok)return o(t.statusText||"Error",{status:t.status,resourceNotExisting:n});t.text().then(function(e){o(null,{status:t.status,data:e,resourceNotExisting:n})}).catch(o)}).catch(o)}function t(t,n,o,r){return"function"==typeof o&&(r=o,o=void 0),r=r||function(){},i?a(t,n,o,r):"function"==typeof XMLHttpRequest||"function"==typeof ActiveXObject?function(e,t,n,o){try{var r;(r=c?new c:new f("MSXML2.XMLHTTP.3.0")).open(n?"POST":"GET",t,1),e.crossDomain||r.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.authorize&&e.apiKey&&r.setRequestHeader("Authorization",e.apiKey),(n||e.setContentTypeJSON)&&r.setRequestHeader("Content-Type","application/json"),r.onreadystatechange=function(){var e="Error from cloudfront"===r.getResponseHeader("x-cache");3<r.readyState&&o(r.statusText,{status:r.status,data:r.responseText,resourceNotExisting:e})},r.send(JSON.stringify(n))}catch(e){console&&console.log(e)}}(t,n,o,r):void Promise.resolve().then(function(){return function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==u(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=o?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}(d("node-fetch"))}).then(function(e){i=e.default||e,a(t,n,o,r)}).catch(r)}o.default=t,n.exports=o.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"node-fetch":4}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.defaults=function(n){return r.call(i.call(arguments,1),function(e){if(e)for(var t in e)void 0===n[t]&&(n[t]=e[t])}),n},n.extend=function(n){return r.call(i.call(arguments,1),function(e){if(e)for(var t in e)n[t]=e[t]}),n},n.debounce=function(o,r,i){var u;return function(){var e=this,t=arguments,n=i&&!u;clearTimeout(u),u=setTimeout(function(){u=null,i||o.apply(e,t)},r),n&&o.apply(e,t)}},n.setPath=function(e,t,n){var o=s(e,t,Object),r=o.obj,i=o.k;r[i]=n},n.pushPath=function(e,t,n,o){var r=s(e,t,Object),i=r.obj,u=r.k;i[u]=i[u]||[],o&&(i[u]=i[u].concat(n));o||i[u].push(n)},n.getPath=function(e,t){var n=s(e,t),o=n.obj,r=n.k;return o?o[r]:void 0},n.interpolate=function(e,t,n){var o,r;for(;o=u.exec(e);)"string"!=typeof(r=o[1].trim())&&(r=c(r)),r=(r=r||"").replace(/\$/g,"$$$$"),e=e.replace(o[0],t[r]||r),u.lastIndex=0;return e},n.isMissingOption=f,n.optionExist=function(e,t){return!f(e,t)},n.replaceIn=function(e,t,n){var o=e;return t.forEach(function(e){var t=new RegExp("{{".concat(e,"}}"),"g");o=o.replace(t,n[e])}),o};var o=[],r=o.forEach,i=o.slice;function s(e,t,n){function o(e){return e&&-1<e.indexOf("###")?e.replace(/###/g,"."):e}for(var r="string"!=typeof t?[].concat(t):t.split(".");1<r.length;){if(!e)return{};var i=o(r.shift());!e[i]&&n&&(e[i]=new n),e=e[i]}return e?{obj:e,k:o(r.shift())}:{}}var u=new RegExp("{{(.+?)}}","g");function c(e){return null==e?"":""+e}function f(o,e){return e.reduce(function(e,t){if(e)return e;if(o&&o[t]&&"string"==typeof o[t]&&!o[t].toLowerCase()!==t.toLowerCase())return!1;var n='i18next-lastused :: got "'.concat(o[t],'" in options for ').concat(t," which is invalid.");return console.warn(n),n},!1)}},{}],4:[function(e,t,n){(function(e){"use strict";e=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw new Error("unable to locate global object")}();t.exports=n=e.fetch,n.default=e.fetch.bind(e),n.Headers=e.Headers,n.Request=e.Request,n.Response=e.Response}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)});